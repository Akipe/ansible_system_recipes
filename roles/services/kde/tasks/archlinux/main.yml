---
- name: Install sddm
  pacman:
    state: present
    name: "{{ kde_appToInstall_sddm_archlinux }}"

- name: Add french keyboard
  template:
    src: xorg.conf.d/00-keyboard.conf.j2
    dest: /etc/X11/xorg.conf.d/00-keyboard.conf
    owner: root
    group: root
    mode: u+rw,g+r,o+r

- name: Install KDE and base apps
  pacman:
    state: present
    name: "{{ kde_appToInstall_base_archlinux }}"

- name: Install KDE apps (AUR)
  become: yes
  become_user: ansible_aur
  aur:
    use: yay
    skip_installed: yes
    aur_only: yes
    name: "{{ kde_appToInstall_base_archlinux_aur }}"

- name: Install Thunar
  pacman:
    state: present
    name: "{{ kde_appToInstall_thunar_archlinux }}"

- name: Install Dolphin
  pacman:
    state: present
    name: "{{ kde_appToInstall_dolphin_archlinux }}"

# - name: Install Dolphin (AUR)
#   become: yes
#   become_user: ansible_aur
#   aur:
#     use: yay
#     skip_installed: yes
#     aur_only: yes
#     name:
#       - resvg
#       - kde-thumbnailer-apk
#       - kde-thumbnailer-blender
#       - kde-thumbnailer-epub

- name: Enable SDDM at startup
  systemd:
    name: sddm.service
    enabled: yes

# https://github.com/PapirusDevelopmentTeam/adapta-kde
- name: Install themes Adapta
  pacman:
    state: present
    name: "{{ kde_appToInstall_theme_archlinux }}"

- name: Install themes Adapta (AUR)
  become: yes
  become_user: ansible_aur
  aur:
    use: yay
    skip_installed: yes
    aur_only: yes
    name: "{{ kde_appToInstall_theme_archlinux_aur }}"
