---
- name: Installation (Pacman)
  pacman:
    state: present
    name:
      - cups
      - cups-pdf
      - cups-filters
      - hplip
      - python-reportlab
      - system-config-printer
      - python-pysmbc
      - bluez-cups
      - simple-scan
      - python-pyqt5

- name: Installation (AUR)
  become: yes
  become_user: ansible_aur
  aur:
    use: yay
    skip_installed: true
    name:
      - hplip-plugin

- name: Enable and start CUPS service
  systemd:
    name: org.cups.cupsd.service
    enabled: yes
    state: started

- name: Add role for the user
  user:
    name: "{{ user_name }}"
    groups: 
      - cups
      - lp
      - sys
    append: yes
